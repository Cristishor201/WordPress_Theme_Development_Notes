![custom post type](/__img/Custom_post_type.png)

1. Inregistrat custom post type

A. Codul se pune in `functions.php` al themei:

```
// Register new Custom Post Type
    function gymfitness_class_post_type(){

        $labels = array(
            'name'              => _x( 'Classes', 'Post Type General Name', 'gymfitness'), //denumirile din backend wordpress
            'singular_name'     => _x('Class', 'Post Type Singular Name', 'gymfitness'),
            'menu_name'         => __('Classes', 'gymfitness'),
            'name_admin_bar'    => __('Classes', 'gymfitness'),
            'archives'          => __('Archive', 'gymfitness'),
            'attributes'        => __('Attributes', 'gymfitness'),
            'parent_item_colon' => __('Parent Class', 'gymfitness'),
            'all_items'         => __('All Classes', 'gymfitness'),
            'add_new_item'      => __('Add Class', 'gymfitness'),
            'add_new'               => __( 'Add Class', 'gymfitness' ),
            'new_item'              => __( 'New Class', 'gymfitness' ),
            'edit_item'             => __( 'Edit Class', 'gymfitness' ),
            'update_item'           => __( 'Update Class', 'gymfitness' ),
            'view_item'             => __( 'View Class', 'gymfitness' ),
            'view_items'            => __( 'View Class', 'gymfitness' ),
            'search_items'          => __( 'Search Class', 'gymfitness' ),
            'not_found'             => __( 'Not found', 'gymfitness' ),
            'not_found_in_trash'    => __( 'Not found in trash', 'gymfitness' ),
            'featured_image'        => __( 'Featured Image', 'gymfitness' ),
            'set_featured_image'    => __( 'Save Featured Image', 'gymfitness' ),
            'remove_featured_image' => __( 'Remove Featured Image', 'gymfitness' ),
            'use_featured_image'    => __( 'Use as Featured Image', 'gymfitness' ),
            'insert_into_item'      => __( 'Insert in Class', 'gymfitness' ),
            'uploaded_to_this_item' => __( 'Add in Class', 'gymfitness' ),
            'items_list'            => __( 'Classes List', 'gymfitness' ),
            'items_list_navigation' => __( 'Navigate to Classes', 'gymfitness' ),
            'filter_items_list'     => __( 'Filter Classes', 'gymfitness' ),
        );

        $args = array(
		'label'                 => __( 'Class', 'gymfitness' ),
		'description'           => __( 'Classes for GymFitness Website', 'gymfitness' ),
		'labels'                => $labels,
		'supports'              => array( 'title', 'editor', 'thumbnail' ), // enable titlu postare, content, si feature image
		'hierarchical'          => false,   // false - no child posts (fara un parent post)
		'public'                => true,
		'show_ui'               => true, //afiseaza continutul in backend
		'show_in_menu'          => true,
        'rewrite'               => array( 'slug' => 'desired-slug' ), // daca vrei sa schimbi cum apare URL in single post
        'menu_position'         => 6,    // Dashboard - 0 ; posts - 5 ; media - 10
        'menu_icon'             => 'dashicons-welcome-learn-more', // incon for the menu
		'show_in_admin_bar'     => true,
		'show_in_nav_menus'     => true, // adaugat un nou custom post direct din frontend (bara de sus)
		'can_export'            => true,
		'has_archive'           => true,
		'exclude_from_search'   => false,
		'publicly_queryable'    => true,
		'capability_type'       => 'page',
        //'show_in_rest'          => true   // enable gutenberg
	);
	register_post_type( 'gymfitness_classes', $args );  // intre 1 - 20 caractere (limitare wordpress core)

    }
    add_action( 'init', 'gymfitness_class_post_type', 0 );
```

B. Codul se pune intr-un custom plugin:

Aventaj: flexibilitate: continutul ramane chiar si la schimbarea themei.

<a href="../Plugin/1. Create a new plugin.md">Create a new plugin</a> si copiat practic acelasi cod in interiorul blocului php.

Si apoi se activeaza Pluginul.

<hr>

Pentru a folosi alt icon pt display in backend wordpress decat  `dashicons-welcome-learn-more`, vezi alte icon-uri disponibile aici:
[dashicons wordpress](https://developer.wordpress.org/resource/dashicons/#admin-generic)


2. Afisat pagina de postari, de tip custom post type
(articole classes)

Mergem pe pagina respectiva (pe care dorim sa se afiseze postarile), din dashboard wordpress / edit page.

Iar apoi luam ce scrie la `slug URL` (permalink pagina). Spre exemplu in acest caz este "classes" dupa numele paginii care este tot "Classes".

3. Creat un nou fisier in thema de forma `page-<slug>.php`

Spre exemplu `page-classes.php` in acest exemplu.

Astfel fortezi wordpress sa incarce un anumit template, pentru o pagina.

iar apoi adaugat in aceel fisier:

```
<?php get_header(); ?>

<main class="container section classes-index">
    <?php
        gymfitness_classes_list();
    ?>
</main>
<?php get_footer(); ?>
```

Acesta fiind formatul general pt pagina, iar in interior este o functie php care populeaza continutul.

4. Creat query pt continut

in thema, creat un no folder inc / include , si pus fisierul `quaries.php`.

In `functions.php` inseram acest fisier ca wordpress sa il includa prin :

```
require get_template_directory() . '/inc/quaries.php';
```

in interiorul fisierului `quaries.php`, creeam o functie cu numele de `gymfitness_classes_list` :

```
<?php
function gymfitness_classes_list(){ ?>
<ul>

</ul>
<?php }
```

In alte cuvinte creeam o functie ce o umplem si cu html ce va se va afisa atunci cand o chemam / call in `page-classes.php`.


in interiorul de la `ul` am creat un custom query pt a interoga postarile din custom post type, prin:

```
<?php
    $args = array(
        'post_type' => 'gymfitness_classes', // asta vine de aici register_post_type( 'gymfitness_classes', $args );
        //'posts_per_page' => 3, // cate afiseaza in acelasi timp (paginile sunt dezactivate initial)
    );
    $classes = new WP_Query($args);

    while($classes->have_posts()): $classes->the_post(); // loop ca cel obisnuit dar pt custom query al nostru
?>

<?php endwhile; wp_reset_postdata(); // ii spui la wordpress ca poate sa-si continue functionalitatea default pt posts ?> 
```

Pentru mai multi parametri consulta [documentatie WP_Query](https://developer.wordpress.org/reference/classes/wp_query/)

5. Completam continut din interiorul loop-ului

```
<a href="<?php the_permalink(); // linkul catre post ?>">
    <h3><?php the_title(); // titlu post ?></h3>
</a>
```

6. Creat afisarea pt single post (interiorul postarii)

in _root_ thema creat fisier `single-gymfitness_classes.php`.

(`single-<post_type>.php`) iar aici intra valoarea de la `register_post_type( 'gymfitness_classes', $args );`, adica atunci cand s-a inregistrat aceast custom post type.

Si apoi umplem fisierul exact cu ce avem si in `page.php`, spre exemplu. Asta se poate pt ca am specificat direct in numele fisierului custom post type de selelcat, fara a fi nevoie de un custom query.

```
<?php get_header(); ?>
    <main class="container page section no-sidebars">
        <?php get_template_part('template-parts/page', 'loop'); ?>
    </main>
<?php get_footer(); ?>
```

Daca nu afiseaza templateul deja pus, atunci mergem la *settings/ permalinks* , si dam *save* 1 data (daca nu de 2 ori).